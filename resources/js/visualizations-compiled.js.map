{"version":3,"sources":["visualizations.js"],"names":[],"mappings":"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","file":"visualizations-compiled.js","sourcesContent":["/**\n * Created by lumpiluk on 9/21/16.\n */\n\nclass Visualization {\n    constructor($container) {\n        this.$container = $container;\n        this.fov = 45;\n        this.aspect = $container.width() / $container.height();\n        this.near = 0.1;\n        this.far = 10000;\n        this.renderer = new THREE.WebGLRenderer();\n        this.scene = new THREE.Scene();\n        this.pivot = new THREE.Object3D(); // Pivot for rotation of camera and lights.\n        this.camera = new THREE.PerspectiveCamera(\n            this.fov, this.aspect, this.near, this.far\n        );\n        this.camera.position.set(0, 0, 0, 1);\n        this.camera.applyMatrix(new THREE.Matrix4().makeTranslation(0, 0, 3));\n        this.camera.lookAt(this.scene.position);\n        this.pivot.add(this.camera);\n        this.scene.add(this.pivot);\n        this.renderer.setClearColor(0x505050, 1);\n        this.renderer.setSize(this.$container.width(), this.$container.height());\n\n        this.$container.append(this.renderer.domElement);\n        let that = this;\n        $(window).resize(function() {\n            that.on_resize.call(that); // Wordy way of calling a function to preserve \"this\".\n        });\n\n        /* Initialize navigation controls. */\n        this.current_rotation = new THREE.Euler(0, 0, 0, \"YXZ\"); // YXZ for no \"sideways\" rotation.\n        this.starting_rotation = new THREE.Euler(0, 0, 0, \"YXZ\");\n        this.rotating = false;\n        this.drag_start = new THREE.Vector2(0, 0);\n        this.$container.mousedown(function(event) {\n            that.on_mouse_down.call(that, event);\n        });\n        this.mouse_move_handler = function(event) { // Will be added to document on mouse down.\n            that.on_mouse_move.call(that, event);\n        };\n        this.mouse_up_handler = function(event) { // Will be added to document on mouse down.\n            that.on_mouse_up.call(that, event);\n        };\n        this.$container.on(\"touchstart\", function(event) {\n            that.on_touch_start.call(that, event);\n        });\n        this.$container.on(\"touchmove\", function(event) {\n            that.on_touch_move.call(that, event);\n        });\n        this.$container.on(\"touchcancel\", function(event) {\n            that.on_touch_cancel.call(that, event);\n        });\n        this.$container.on(\"touchend\", function(event) {\n            that.on_touch_end.call(that, event);\n        });\n    }\n\n    render() {\n        this.renderer.render(this.scene, this.camera);\n    }\n\n    on_resize() {\n        this.renderer.setSize(this.$container.width(), this.$container.height());\n        this.camera.aspect = this.$container.width() / this.$container.height();\n        this.camera.updateProjectionMatrix();\n        this.render();\n    }\n\n    on_mouse_down(event) {\n        this.drag_start.set(event.pageX, event.pageY);\n        this.starting_rotation.copy(this.pivot.rotation);\n        this.rotating = true;\n        let that = this;\n        document.addEventListener(\"mousemove\", this.mouse_move_handler, false);\n        document.addEventListener(\"mouseup\", this.mouse_up_handler, false);\n    }\n\n    update_rotation(delta_x, delta_y) {\n        this.current_rotation.y = (this.starting_rotation.y + delta_y) % (2 * Math.PI);\n        this.current_rotation.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2,\n            (this.starting_rotation.x + delta_x) % (2 * Math.PI)));\n        this.pivot.rotation.copy(this.current_rotation);\n        this.render();\n    }\n\n    on_mouse_move(event) {\n        if (!this.rotating) {\n            return;\n        }\n        event.preventDefault();\n        /* (y in delta_y is y-axis in 3D. Same for x in delta_x.) */\n        let delta_y = -(event.pageX - this.drag_start.x) / $(window).width() * 2 * Math.PI;\n        let delta_x = -(event.pageY - this.drag_start.y) / $(window).height() * 2 * Math.PI;\n        this.update_rotation(delta_x, delta_y);\n    }\n\n    on_mouse_up(event) {\n        this.rotating = false;\n        document.removeEventListener(\"mousemove\", this.mouse_move_handler, false);\n        document.removeEventListener(\"mouseup\", this.mouse_up_handler, false);\n    }\n\n    on_touch_start(event) {\n        switch(event.touches.length) {\n            case 1: /* One finger -> rotate! */\n                event.preventDefault();\n                this.drag_start.set(event.touches[0].pageX, event.touches[0].pageY);\n                this.starting_rotation.copy(this.pivot.rotation);\n                this.rotating = true;\n                let that = this;\n                document.addEventListener(\"mousemove\", this.mouse_move_handler, false);\n                document.addEventListener(\"mouseup\", this.mouse_up_handler, false);\n                break;\n            case 2: /* Two fingers -> zoom! */\n\n                break;\n        }\n    }\n\n    on_touch_move(event) {\n        if (!this.rotating) {\n            return;\n        }\n        event.preventDefault();\n        /* (y in delta_y is y-axis in 3D. Same for x in delta_x.) */\n        let delta_y = -(event.touches[0].pageX - this.drag_start.x) / $(window).width() * 2 * Math.PI;\n        let delta_x = -(event.touches[0].pageY - this.drag_start.y) / $(window).height() * 2 * Math.PI;\n        this.update_rotation(delta_x, delta_y);\n    }\n\n    on_touch_cancel(event) {}\n\n    on_touch_end(event) {\n        this.on_mouse_up(event);\n    }\n}\n\nclass RGBCubeVisualization extends Visualization {\n    constructor($container) {\n        super($container);\n        this.wireframe_cube_geometry = new THREE.BoxGeometry(1, 1, 1);\n        this.wireframe_cube = new THREE.BoxHelper(\n            new THREE.Mesh(this.wireframe_cube_geometry),\n            0xffffff\n        );\n        this.scene.add(this.wireframe_cube);\n    }\n}\n\n/**\n * List of visualizations in this document.\n * @type {Array}\n */\nlet visualizations = [];\n\n/**\n * Matches each figure ID to the figure's visible number in the document.\n * @type {{}}\n */\nlet figures = {};\n\n$(document).ready(function() {\n    /*\n     * Find and initialize all visualizations as soon as the page is loaded.\n     */\n    console.log(\"Initializing visualizations.\");\n    $(\".visualization.rgb-cube\").each(function() {\n        let rgb_cube = new RGBCubeVisualization($(this));\n        rgb_cube.render();\n        visualizations.push(rgb_cube);\n    });\n\n    /* Enumerate figures. */\n    $(\".figure-title\").each(function(index) {\n        let fig_id = $(this).parent().attr(\"id\");\n        figures[fig_id] = index + 1;\n        $(this).prepend('<b>Figure ' + (index + 1).toString() + ':</b> ');\n    });\n    /* Update references. */\n    $(\"figref\").each(function() {\n        let fig_id = $(this).data(\"fig-id\");\n        $(this).html('<a href=\"#' + fig_id + '\">Figure ' + figures[fig_id] + '</a>');\n    });\n});\n"]}