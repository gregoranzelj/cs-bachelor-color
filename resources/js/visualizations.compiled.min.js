(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(c,b,f){var d=function(){function m(q,o){for(var n=0;n<o.length;n++){var p=o[n];p.enumerable=p.enumerable||false;p.configurable=true;if("value" in p){p.writable=true}Object.defineProperty(q,p.key,p)}}return function(p,n,o){if(n){m(p.prototype,n)}if(o){m(p,o)}return p}}();function j(m,n){if(!m){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n&&(typeof n==="object"||typeof n==="function")?n:m}function k(n,m){if(typeof m!=="function"&&m!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof m)}n.prototype=Object.create(m&&m.prototype,{constructor:{value:n,enumerable:false,writable:true,configurable:true}});if(m){Object.setPrototypeOf?Object.setPrototypeOf(n,m):n.__proto__=m}}function g(m,n){if(!(m instanceof n)){throw new TypeError("Cannot call a class as a function")}}var h=function(){function s(A){g(this,s);this.$container=A;this.fov=45;this.min_focal_length=10;this.max_focal_length=400;this.zoom_steps=20;this.zoom_sensitivity=0.25;this.aspect=A.width()/A.height();this.near=0.1;this.far=10000;this.renderer=new THREE.WebGLRenderer();this.scene=new THREE.Scene();this.pivot=new THREE.Object3D();this.camera=new THREE.PerspectiveCamera(this.fov,this.aspect,this.near,this.far);this.camera.position.set(0,0,0,1);this.camera.applyMatrix(new THREE.Matrix4().makeTranslation(0,0,3));this.camera.lookAt(this.scene.position);this.pivot.add(this.camera);this.scene.add(this.pivot);this.renderer.setClearColor(5263440,1);this.renderer.setSize(this.$container.width(),this.$container.height());this.$container.append(this.renderer.domElement);var z=this;$(window).resize(function(){z.on_resize.call(z)});this.current_rotation=new THREE.Euler(0,0,0,"YXZ");this.starting_rotation=new THREE.Euler(0,0,0,"YXZ");this.starting_focal_length=0;this.dragging=false;this.two_fingers_touching=false;this.drag_start=new THREE.Vector2(0,0);this.scale_start_distance=0;this.$container.mousedown(function(B){z.on_mouse_down.call(z,B)});this.$container.on("wheel",function(B){z.on_wheel.call(z,B)});this.mouse_move_handler=function(B){z.on_mouse_move.call(z,B)};this.mouse_up_handler=function(B){z.on_mouse_up.call(z,B)};this.$container.on("touchstart",function(B){z.on_touch_start.call(z,B)});this.$container.on("touchmove",function(B){z.on_touch_move.call(z,B)});this.$container.on("touchcancel",function(B){z.on_touch_cancel.call(z,B)});this.$container.on("touchend",function(B){z.on_touch_end.call(z,B)})}d(s,[{key:"render",value:function m(){this.renderer.render(this.scene,this.camera)}},{key:"update_rotation",value:function w(A,z){this.current_rotation.y=(this.starting_rotation.y+z)%(2*Math.PI);this.current_rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,(this.starting_rotation.x+A)%(2*Math.PI)));this.pivot.rotation.copy(this.current_rotation)}},{key:"update_scale",value:function u(z){this.camera.setFocalLength(Math.max(this.min_focal_length,Math.min(this.max_focal_length,this.starting_focal_length+z)))}},{key:"on_resize",value:function x(){this.renderer.setSize(this.$container.width(),this.$container.height());this.camera.aspect=this.$container.width()/this.$container.height();this.camera.updateProjectionMatrix();this.render()}},{key:"on_mouse_down",value:function q(A){this.drag_start.set(A.pageX,A.pageY);this.starting_rotation.copy(this.pivot.rotation);this.dragging=true;var z=this;document.addEventListener("mousemove",this.mouse_move_handler,false);document.addEventListener("mouseup",this.mouse_up_handler,false)}},{key:"on_mouse_move",value:function v(z){if(!this.dragging){return}z.preventDefault();var A=-(z.pageX-this.drag_start.x)/$(window).width()*2*Math.PI;var B=-(z.pageY-this.drag_start.y)/$(window).height()*2*Math.PI;this.update_rotation(B,A);this.render()}},{key:"on_mouse_up",value:function t(z){this.dragging=false;document.removeEventListener("mousemove",this.mouse_move_handler,false);document.removeEventListener("mouseup",this.mouse_up_handler,false)}},{key:"on_wheel",value:function p(z){var A=-z.originalEvent.deltaY;z.preventDefault();switch(z.originalEvent.deltaMode){case 0:A*=(this.max_focal_length-this.min_focal_length)/$(window).height();break;case 1:case 2:A*=(this.max_focal_length-this.min_focal_length)/this.zoom_steps;break}this.starting_focal_length=this.camera.getFocalLength();this.update_scale(A*this.zoom_sensitivity);this.render()}},{key:"on_touch_start",value:function r(z){this.drag_start.set(z.touches[0].pageX,z.touches[0].pageY);this.starting_rotation.copy(this.pivot.rotation);this.dragging=true;switch(z.touches.length){case 1:break;case 2:z.preventDefault();this.scale_start_distance=new THREE.Vector2(z.touches[0].pageX,z.touches[0].pageY).distanceTo(new THREE.Vector2(z.touches[1].pageX,z.touches[1].pageY));this.starting_focal_length=this.camera.getFocalLength();this.two_fingers_touching=true;break}document.addEventListener("mousemove",this.mouse_move_handler,false);document.addEventListener("mouseup",this.mouse_up_handler,false)}},{key:"on_touch_move",value:function y(z){if(!this.dragging){return}var A=-(z.touches[0].pageX-this.drag_start.x)/$(window).width()*2*Math.PI;var D=-(z.touches[0].pageY-this.drag_start.y)/$(window).height()*2*Math.PI;if(!this.two_fingers_touching){D=0}this.update_rotation(D,A);if(this.two_fingers_touching){z.preventDefault();var C=new THREE.Vector2(z.touches[0].pageX,z.touches[0].pageY).distanceTo(new THREE.Vector2(z.touches[1].pageX,z.touches[1].pageY));var B=(C-this.scale_start_distance)/$(window).width()*(this.max_focal_length-this.min_focal_length);this.update_scale(B)}this.render()}},{key:"on_touch_cancel",value:function o(z){}},{key:"on_touch_end",value:function n(z){this.on_mouse_up(z);this.two_fingers_touching=false}}]);return s}();var a=function(n){k(m,n);function m(o){g(this,m);var p=j(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,o));p.wireframe_cube_geometry=new THREE.BoxGeometry(1,1,1);p.wireframe_cube=new THREE.BoxHelper(new THREE.Mesh(p.wireframe_cube_geometry),16777215);p.scene.add(p.wireframe_cube);p.rgb_cube_geometry=new THREE.BoxGeometry(1,1,1);p.rgb_cube_shader=c("../shaders/rgb-fragment.glsl");console.log(p.rgb_cube_shader());return p}return m}(h);var l=[];var i={};$(document).ready(function(){console.log("Initializing visualizations.");$(".visualization.rgb-cube").each(function(){var m=new a($(this));m.render();l.push(m)});$(".figure-title").each(function(m){var n=$(this).parent().attr("id");i[n]=m+1;$(this).prepend("<b>Figure "+(m+1).toString()+":</b> ")});$("figref").each(function(){var m=$(this).data("fig-id");$(this).html('<a href="#'+m+'">Figure '+i[m]+"</a>")})})},{"../shaders/rgb-fragment.glsl":2}],2:[function(b,c,a){c.exports=function d(i){var g="testtest \n \n";i=i||{};for(var f in i){var h=new RegExp("{{"+f+"}}","g");g=g.replace(h,i[f])}return g}},{}]},{},[1]);